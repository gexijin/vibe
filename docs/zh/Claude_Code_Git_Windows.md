[首页](./)

# Windows 系统上的 Claude Code 版本控制

你正在使用 AI 助手协作，它会修改你的文件。有时效果出色，有时则不然。**版本控制就像整个项目的撤销按钮。**每次保存快照（称为"提交"），你就创建了一个可以随时返回的还原点。最棒的是，你可以完全在本地完成这些操作，Claude Code 会为你处理一切。

## 核心概念

- **WSL (Windows Subsystem for Linux)** - 在 Windows 上原生运行 Linux 工具（如 Git）
- **Git** - 在计算机上跟踪文件的每次更改，创建可以随时返回的还原点
- **Commit** - 项目在特定时间点的快照，附带变更描述
- **Claude Code** - AI 编码助手，可以编写代码、修复错误，并通过简单请求处理 Git 操作

## 你需要准备什么

- 完成 [在 Windows 上安装 Claude Code](./Install_CLAUDE_Code_Win)
- 已安装 WSL 和 Ubuntu
- 20 分钟

## 步骤 1：打开 Ubuntu Terminal

- 点击 **开始** 菜单
- 输入 `Ubuntu`
- 点击 **Ubuntu** 打开终端

你会看到一个以 `$` 结尾的命令提示符。

## 步骤 2：安装 Git

- 输入以下命令并按回车：
  ```
  sudo apt-get install git
  ```
- 当提示时，输入你的密码并按回车
- 等待安装完成（10-30 秒）
- 验证 Git 已安装：
  ```
  git --version
  ```

你应该会看到类似 `git version 2.34.1` 的内容。

## 步骤 3：使用你的身份配置 Git

Git 需要知道你是谁以便在提交消息中记录。

- 设置姓名和邮箱（可以是虚构的）
  ```
  git config --global user.name "Your Name"
  git config --global user.email "your.email@example.com"
  ```

使用姓名和邮箱有助于在多人协作时识别是谁做出了更改。

## 步骤 4：导航到 Windows 文件夹

WSL 可以通过 `/mnt/c/` 访问 Windows 文件。

- 导航到 Windows 用户文件夹：
  ```
  cd /mnt/c/Users/YOUR_USERNAME/Documents
  ```
  将 `YOUR_USERNAME` 替换为实际的 Windows 用户名。
- 验证位置：
  ```
  pwd
  ```

你应该看到 `/mnt/c/Users/YOUR_USERNAME/Documents`。

## 步骤 5：创建项目文件夹

- 创建一个名为 `test_claude` 的文件夹：
  ```
  mkdir test_claude
  ```
- 进入该文件夹：
  ```
  cd test_claude
  ```

这就是你的项目将要存放的位置。

## 步骤 6：启动 Claude Code

- 启动 Claude Code：
  ```
  claude
  ```

Claude Code 启动并等待你的请求。

## 步骤 7：让 Claude 初始化 Git

- 输入以下请求：
  ```
  开始跟踪更改
  ```

Claude 会在文件夹中初始化 Git 仓库（需要 2-5 秒）。现在你拥有了版本控制！

## 步骤 8：构建倒计时应用

- 在 Claude Code 中输入：
  ```
  创建一个简单的倒计时器应用，放在一个名为 timer.html 的文件中。
  它应该包含：
  - 一个输入框用于设置分钟数
  - 开始和停止按钮
  - 以 MM:SS 格式显示剩余时间
  ```

Claude 会创建 `timer.html`（需要 10-30 秒），包含 CSS 和 JavaScript 代码。

## 步骤 9：测试倒计时器

- 打开 Windows 文件资源管理器
- 导航到 `Documents\test_claude`
- 双击 `timer.html` 在浏览器中打开
- 测试倒计时器：
  - 在输入框中输入 `1`
  - 点击 **Start**
  - 观察倒计时

**如果出现问题：** 在 Claude Code 中描述错误：`我看到这个错误：[描述发生了什么]。你能修复它吗？`

## 步骤 10：让 Claude 提交更改

- 在 Claude Code 中输入：
  ```
  保存这些更改
  ```

Claude 会：
- 检查哪些文件发生了更改
- 编写描述性的提交消息
- 创建提交（需要 5-10 秒）

你已创建了第一个保存点！可以随时返回到这个可工作的版本。

## 步骤 11：添加预设按钮

- 在 Claude Code 中输入：
  ```
  在顶部添加两个按钮。点击它们时自动启动 1 分钟和 5 分钟的计时器。
  ```
- 刷新浏览器标签
- 测试：点击 **5 min** 按钮
- 如果有效，提交更改：
  ```
  保存这些更改
  ```

我们创建了第二个保存点。这个版本中两个按钮都在正常工作。


## 步骤 12：添加另一个按钮

- 在 Claude Code 中输入：
  ```
  添加一个 15 分钟按钮
  ```
- 刷新浏览器标签
- 测试：点击 **15 min** 按钮

**在本教程中：** 假装 15 分钟按钮无法正常工作。先不要提交——我们将练习丢弃不良更改。

## 步骤 13：丢弃更改

有时 AI 代码无法正常工作，你需要从上一个保存点重新开始。

- 在 Claude Code 中输入：
  ```
  丢弃这些更改
  ```
- Claude 会要求确认
- 输入 `yes` 并按回车
- 刷新浏览器——15 分钟按钮消失了

Claude 丢弃了我们不喜欢的新更改。倒计时器恢复正常，只有 1 分钟和 5 分钟按钮！

## 步骤 14：添加声音通知

- 在 Claude Code 中输入：
  ```
  计时器归零时添加声音通知
  ```
- Claude 完成后刷新浏览器并测试（将计时器设置为 0.1 分钟）
- 如果有效，提交更改：
  ```
  保存这些更改
  ```

## 步骤 15：添加小睡按钮

- 在 Claude Code 中输入：
  ```
  声音应该持续播放，直到我点击按钮关闭它
  ```
- Claude 完成后刷新浏览器并测试（将计时器设置为 0.1 分钟）
- 如果有效，提交更改：
  ```
  保存这些更改
  ```

## 步骤 16：查看你的提交历史

- 在 Claude Code 中输入：
  ```
  显示我的更改历史
  ```

Claude 会以易读格式显示你的提交。你会看到：
- 初始倒计时应用的提交
- 预设按钮（1 分钟和 5 分钟）的提交
- 声音通知的提交
- 小睡按钮的提交

注意 15 分钟按钮的尝试不在其中——你已丢弃了它！

## 步骤 17：检查代码

- 在显示应用的浏览器中，右键点击并选择 **查看网页源代码**
- 你可以看到相关的源代码。
- 在 Claude Code 中询问：
  ```
  解释这段代码。只需要大致说明。
  ```

## 完整工作流程

- 让 Claude 进行更改
- 测试
- 如果有效 → 让 Claude 提交
- 如果失败 → 让 Claude 修复它
- 无法修复 → 丢弃更改并重试
- 重复

你可以随时返回到任何提交。大胆丢弃——只提交可工作的代码！

## 下一步

尝试为倒计时器添加更多功能：

- **15 分钟按钮：** `添加一个可用的 15 分钟预设按钮`（重做我们丢弃的内容！）
- **暂停按钮：** `添加一个暂停/恢复按钮来切换计时器状态`
- **更好的样式：** `用现代配色方案和更大字体改进视觉设计`
- **进度条：** `添加显示剩余时间的进度条`

记住：每个功能后测试，每次成功后提交，丢弃失败的尝试。

## 故障排除

- **"not a git repository" 错误：** 确保在 test_claude 文件夹中（`cd /mnt/c/Users/YOUR_USERNAME/Documents/test_claude`）
- **在 Windows 中找不到 timer.html：** 文件位于 `C:\Users\YOUR_USERNAME\Documents\test_claude\timer.html`
- **Git 要求输入密码：** 你输错了 `sudo` 密码——仔细重试
- **倒计时器无法工作：** 打开浏览器控制台（右键点击页面，选择 **检查**，点击 **Console** 标签），复制任何红色错误消息，粘贴给 Claude

## 你可以向 Claude 询问什么

- `我修改了哪些文件？` - 查看未提交的更改
- `显示差异` - 查看具体的代码更改
- `解释计时器代码的作用` - 理解实现方式
- `创建一个名为 experiment 的分支` - 安全地尝试风险性更改
- `回到上一次提交` - 撤销自上次提交以来的所有更改

Claude 通过自然语言处理所有 Git 操作——无需记忆命令！

## 工作流程概览

- **设置：** 安装 Git 一次，配置身份一次
- **开发：** Claude 编写代码，你在浏览器中测试
- **版本控制：** Claude 通过简单请求处理所有 Git 操作
- **安全性：** 随时丢弃不良更改，返回到任何之前的提交
- **本地：** 一切都保存在计算机上，无需账户或互联网连接

由 [Steven Ge](https://www.linkedin.com/in/steven-ge-ab016947/) 创建于 2025 年 12 月 8 日。
